{"version":3,"file":"component---src-pages-index-tsx-53ab21add3caada395f5.js","mappings":"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","sources":["webpack://site/./src/pages/index.tsx"],"sourcesContent":["import {useContext, useEffect, useState} from 'react';\nimport styled from 'styled-components';\n// import { assert } from '@metamask/utils';\nimport {MetamaskActions, MetaMaskContext} from '../hooks';\nimport {\n  connectSnap,\n  getSnap,\n  sendHello,\n  getState,\n} from '../utils';\nimport {\n  ConnectButton,\n  InstallFlaskButton,\n  ReconnectButton,\n  Button,\n  Card,\n} from '../components';\nimport {request, useLazyGetAccountsQuery} from '../utils/api';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n  margin-top: .6rem;\n  margin-bottom: 7.6rem;\n\n  ${({theme}) => theme.mediaQueries.small} {\n    padding-left: 2.4rem;\n    padding-right: 2.4rem;\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n    width: auto;\n  }\n`;\n\nconst Heading = styled.h1`\n  margin-top: 0;\n  margin-bottom: 2.4rem;\n  text-align: center;\n`;\n\nconst Span = styled.span`\n  color: ${(props) => props.theme.colors.primary.default};\n`;\n\nconst Subtitle = styled.p`\n  font-size: ${({theme}) => theme.fontSizes.large};\n  font-weight: 500;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  ${({theme}) => theme.mediaQueries.small} {\n    font-size: ${({theme}) => theme.fontSizes.text};\n  }\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  max-width: 64.8rem;\n  width: 100%;\n  height: 100%;\n  margin-top: 1.5rem;\n`;\n\nconst Label = styled.label`\n  display: block;\n  font-weight: bold;\n`\n\nconst TokenSelect = styled.select`\n  width: 100%;\n  margin-top: 10px;\n  margin-bottom: 10px;\n`\n\nconst Notice = styled.div`\n  background-color: ${({theme}) => theme.colors.background.alternative};\n  border: 1px solid ${({theme}) => theme.colors.border.default};\n  color: ${({theme}) => theme.colors.text.alternative};\n  border-radius: ${({theme}) => theme.radii.default};\n  padding: 2.4rem;\n  margin-top: 2.4rem;\n  max-width: 60rem;\n  width: 100%;\n\n  & > * {\n    margin: 0;\n  }\n\n  ${({theme}) => theme.mediaQueries.small} {\n    margin-top: 1.2rem;\n    padding: 1.6rem;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  background-color: ${({theme}) => theme.colors.error.muted};\n  border: 1px solid ${({theme}) => theme.colors.error.default};\n  color: ${({theme}) => theme.colors.error.alternative};\n  border-radius: ${({theme}) => theme.radii.default};\n  padding: 2.4rem;\n  margin-bottom: 2.4rem;\n  margin-top: 2.4rem;\n  max-width: 60rem;\n  width: 100%;\n\n  ${({theme}) => theme.mediaQueries.small} {\n    padding: 1.6rem;\n    margin-bottom: 1.2rem;\n    margin-top: 1.2rem;\n    max-width: 100%;\n  }\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 10px;\n`\n\nconst Index = () => {\n  const [contracts, setContracts] = useState(null);\n  const [getAccounts, {isLoading: isLoadingAccounts, data: accounts}] =\n    useLazyGetAccountsQuery();\n\n  const [state, dispatch] = useContext(MetaMaskContext);\n\n  useEffect(() => {\n    getAccounts()\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      .then((accounts) => console.log(`###: accounts`, accounts))\n      .catch((e) => console.log(`###: e`, e));\n  }, []);\n\n  const handleConnectClick = async () => {\n    try {\n      await connectSnap();\n\n      const installedSnap = await getSnap();\n\n      dispatch({\n        type: MetamaskActions.SetInstalled,\n        payload: installedSnap,\n      });\n    } catch (e) {\n      console.error(e);\n      dispatch({type: MetamaskActions.SetError, payload: e});\n    }\n  };\n\n\n  function handleSendTransaction(contractAddress: string) {\n    return function sendTransaction(e){\n      const account = accounts[0];\n      // @ts-ignore\n      request({\n        method: 'eth_sendTransaction',\n        params: [\n          {\n            from: account,\n            to: contractAddress,\n            value: '0x0',\n            data: '0x1',\n          },\n        ],\n      });\n    }\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    console.log(e.target);\n  }\n\n  async function getContracts() {\n    const state = await getState();\n    console.log('state: ', state);\n  }\n\n  // @ts-ignore\n  return (\n    <Container>\n      <Heading>\n        Spotter Snap\n      </Heading>\n      <Subtitle>\n        Real-time notifications on potential hacks. Stay secure!\n      </Subtitle>\n      <CardContainer>\n        {state.error && (\n          <ErrorMessage>\n            <b>An error happened:</b> {state.error.message}\n          </ErrorMessage>\n        )}\n        <Card\n          content={{\n            title: 'Reconnect',\n            description:\n              'While connected to a local running snap this button will always be displayed in order to update the snap if a change is made.',\n            button: (\n              <ReconnectButton\n                onClick={handleConnectClick}\n              />\n            ),\n          }}\n        />\n        {!state.isFlask && (\n          <Card\n            content={{\n              title: 'Install',\n              description:\n                'Snaps is pre-release software only available in MetaMask Flask, a canary distribution for developers with access to upcoming features.',\n              button: <InstallFlaskButton/>,\n            }}\n            fullWidth\n          />\n        )}\n        {state.installedSnap && (\n          <Card\n            background={'red'}\n            content={{\n              title: 'High Security Risk',\n              description:\n                'Try high risk contract.',\n              button: (\n                <Button\n                  onClick={handleSendTransaction(\n                    `0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2`,\n                  )}\n                  disabled={!state.isFlask}\n                >Send</Button>\n              ),\n            }}\n            disabled={!state.isFlask}\n          />\n        )}\n        {state.installedSnap && (\n          <Card\n            background={'orange'}\n            content={{\n              title: 'Mid Security Risk',\n              description: 'Try mid risk contract.',\n              button: (\n                <Button\n                  onClick={handleSendTransaction(\n                    `0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9`,\n                  )}\n                  disabled={!state.isFlask}\n                  >Send</Button>\n              ),\n            }}\n            disabled={!state.isFlask}\n          />\n        )}\n        {state.installedSnap && (\n          <Card\n            background={'green'}\n            content={{\n              title: 'No Security Risk',\n              description:\n                'Try no security risk contract.',\n              button: (\n                <Button\n                  onClick={handleSendTransaction(\n                    `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE8`,\n                  )}\n                  disabled={!state.isFlask}\n                  >Send</Button>\n              ),\n            }}\n            disabled={!state.isFlask}\n          />\n        )}\n      </CardContainer>\n      <CardContainer>\n        <form id=\"token-select\" onSubmit={handleSubmit}> \n          <Label htmlFor=\"tokens\">Select tokens on Ethereum Mainnet to be monitored by Spotter Snap:</Label>\n          <TokenSelect name=\"tokens\" id=\"tokens\" multiple>\n            <option value=\"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE8\">Aave WETH V3</option>\n            <option value=\"0x95ecdc6caaf7e4805fcef2679a92338351d24297\">crvUSD</option>\n            <option value=\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\">USDC</option>\n            <option value=\"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\">USDT</option>\n          </TokenSelect>\n          <ButtonGroup> \n            <Button type=\"submit\">Update</Button>\n            <Button type=\"Button\" onClick={getContracts}>Get Contracts</Button>\n            <Button type=\"reset\">Clear</Button>\n          </ButtonGroup>\n        </form>\n      </CardContainer>\n    </Container>\n  );\n};\n\nexport default Index;\n"],"names":["Container","styled","displayName","componentId","theme","mediaQueries","small","Heading","Subtitle","props","colors","primary","default","fontSizes","large","text","CardContainer","Label","TokenSelect","ErrorMessage","background","alternative","border","radii","error","muted","ButtonGroup","useState","useLazyGetAccountsQuery","getAccounts","_useLazyGetAccountsQu2","accounts","isLoading","data","useContext","MetaMaskContext","state","dispatch","useEffect","then","console","log","catch","e","handleConnectClick","_context","connectSnap","getSnap","installedSnap","type","MetamaskActions","payload","handleSendTransaction","contractAddress","account","request","method","params","from","to","value","_getContracts","_context2","getState","_jsxs","children","_jsx","message","Card","content","title","description","button","ReconnectButton","onClick","isFlask","InstallFlaskButton","fullWidth","Button","disabled","id","onSubmit","preventDefault","target","htmlFor","name","multiple"],"sourceRoot":""}